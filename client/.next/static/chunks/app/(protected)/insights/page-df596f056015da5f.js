(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[726],{4230:function(e,s,t){Promise.resolve().then(t.bind(t,3905))},3905:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return c}});var r=t(7437),i=t(2265),n=t(8711),a=t(4674),l=t(3648),d=()=>{let{supabase:e}=(0,a.$4)(),[s,t]=(0,i.useState)(null),[d,c]=(0,i.useState)(!0),[o,m]=(0,i.useState)("");return(0,i.useEffect)(()=>{(async()=>{try{let{data:{session:s}}=await e.auth.getSession();if(!(null==s?void 0:s.access_token)){c(!1);return}let r=await fetch("".concat("http://localhost:5000","/api/insights/dashboard?period=7d"),{headers:{Authorization:"Bearer ".concat(s.access_token)}});if(!r.ok){let e=await r.json().catch(()=>({}));throw Error(e.error||"Failed to fetch insights")}let i=await r.json();t(i)}catch(e){m(e.message)}finally{c(!1)}})()},[e]),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"AI Insights"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Analyze patient responses with AI-powered insights"})]})}),(0,r.jsx)("div",{className:"card",children:d?(0,r.jsx)("div",{className:"py-12 text-center",children:(0,r.jsx)(l.Z,{})}):o?(0,r.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700",children:o}):s?(0,r.jsxs)("div",{className:"py-6 space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Total Responses"}),(0,r.jsx)("div",{className:"text-2xl font-semibold",children:s.summary.totalResponses})]}),(0,r.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Fine"}),(0,r.jsx)("div",{className:"text-2xl font-semibold text-green-600",children:s.summary.fineCount})]}),(0,r.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Mild Issues"}),(0,r.jsx)("div",{className:"text-2xl font-semibold text-yellow-600",children:s.summary.mildIssueCount})]}),(0,r.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Urgent"}),(0,r.jsx)("div",{className:"text-2xl font-semibold text-red-600",children:s.summary.urgentCount})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-2 flex items-center",children:[(0,r.jsx)(n.Z,{className:"h-5 w-5 mr-2"}),"Recent Responses"]}),(0,r.jsx)("div",{className:"divide-y",children:s.recentResponses.map(e=>{var s;return(0,r.jsxs)("div",{className:"py-3 flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium text-gray-900",children:(null===(s=e.patients)||void 0===s?void 0:s.name)||"Patient"}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:e.ai_summary||e.response_text})]}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:e.ai_status})]},e.id)})})]})]}):(0,r.jsx)("div",{className:"py-12 text-center",children:"No data"})})]})};function c(){return(0,r.jsx)(d,{})}},1066:function(e,s,t){"use strict";t.d(s,{Z:function(){return c}});var r=t(1920),i=t(7029),n=t(3090),a=t(2265),l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),c=(e,s)=>{let t=(0,a.forwardRef)((t,c)=>{var{color:o="currentColor",size:m=24,strokeWidth:x=2,absoluteStrokeWidth:h,className:u="",children:p}=t,j=(0,n._)(t,["color","size","strokeWidth","absoluteStrokeWidth","className","children"]);return(0,a.createElement)("svg",(0,r._)((0,i._)((0,r._)({ref:c},l),{width:m,height:m,stroke:o,strokeWidth:h?24*Number(x)/Number(m):x,className:["lucide","lucide-".concat(d(e)),u].join(" ")}),j),[...s.map(e=>{let[s,t]=e;return(0,a.createElement)(s,t)}),...Array.isArray(p)?p:[p]])});return t.displayName="".concat(e),t}},8711:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(1066).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},3648:function(e,s,t){"use strict";var r=t(7437);t(2265),s.Z=e=>{let{size:s="md",className:t=""}=e;return(0,r.jsx)("div",{className:"flex items-center justify-center ".concat(t),children:(0,r.jsx)("div",{className:"loading-spinner ".concat({sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12",xl:"h-16 w-16"}[s])})})}},4674:function(e,s,t){"use strict";t.d(s,{$4:function(){return m},FV:function(){return x}});var r=t(7437),i=t(2265),n=t(46);let a="https://phoumeccawrtsjztxldi.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBob3VtZWNjYXdydHNqenR4bGRpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAzNDEyNTcsImV4cCI6MjA3NTkxNzI1N30.xMGO_scepJgrqhF318DZuXQwuVcZR47AMS81wFwcQA0";a&&a.startsWith("https://"),l&&l.split(".").length;let d=a&&l?(0,n.eI)(a,l):null,c={supabase:d},o=(0,i.createContext)(),m=()=>{let e=(0,i.useContext)(o);if(!e)throw Error("useSupabase must be used within a SupabaseProvider");return e},x=e=>{let{children:s}=e;if(!d){let e=[];a||e.push("NEXT_PUBLIC_SUPABASE_URL"),l||e.push("NEXT_PUBLIC_SUPABASE_ANON_KEY");let s=e=>"string"==typeof e?"".concat(e.slice(0,6),"...").concat(e.slice(-4)):"";return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"max-w-lg w-full bg-red-50 border border-red-200 rounded-md p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Configuration error"}),(0,r.jsx)("p",{className:"text-sm text-red-700 mb-3",children:"Missing required environment variables. Update client/.env.local and restart the dev server."}),(0,r.jsxs)("ul",{className:"text-sm text-red-700 list-disc pl-5 space-y-1",children:[!a&&(0,r.jsx)("li",{children:"REACT_APP_SUPABASE_URL is missing"}),!l&&(0,r.jsx)("li",{children:"REACT_APP_SUPABASE_ANON_KEY is missing"})]}),(0,r.jsxs)("div",{className:"mt-4 text-xs text-red-700",children:[(0,r.jsx)("div",{children:"Current values (masked):"}),(0,r.jsxs)("div",{children:["URL: ",a?s(a):"(not set)"]}),(0,r.jsxs)("div",{children:["Anon Key: ",l?s(l):"(not set)"]})]}),(0,r.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Reload App"})]})})}return(0,r.jsx)(o.Provider,{value:c,children:s})}}},function(e){e.O(0,[46,971,23,744],function(){return e(e.s=4230)}),_N_E=e.O()}]);