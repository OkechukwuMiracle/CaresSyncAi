(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[200],{1787:function(e,t,s){Promise.resolve().then(s.bind(s,9645))},9645:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var n=s(7437),r=s(2265),i=s(2513),a=s(1240),c=s(7138),l=s(4674),d=s(3648),o=()=>{let{supabase:e}=(0,l.$4)(),[t,s]=(0,r.useState)([]),[o,h]=(0,r.useState)(!0),[u,x]=(0,r.useState)("");return(0,r.useEffect)(()=>{(async()=>{try{let{data:{session:t}}=await e.auth.getSession();if(!(null==t?void 0:t.access_token)){s([]),h(!1);return}let n=await fetch("".concat("http://localhost:5000","/api/patients"),{headers:{Authorization:"Bearer ".concat(t.access_token)}});if(!n.ok){let e=await n.json().catch(()=>({}));throw Error(e.error||"Failed to fetch patients")}let r=await n.json();s(r.patients||[])}catch(e){x(e.message)}finally{h(!1)}})()},[e]),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Patients"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Manage your patient records and follow-ups"})]}),(0,n.jsxs)(c.default,{href:"/patients/new",className:"btn-primary flex items-center",children:[(0,n.jsx)(i.Z,{className:"h-4 w-4 mr-2"}),"Add Patient"]})]}),(0,n.jsx)("div",{className:"card",children:o?(0,n.jsx)("div",{className:"py-12 text-center",children:(0,n.jsx)(d.Z,{})}):u?(0,n.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700",children:u}):0===t.length?(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)(a.Z,{className:"h-16 w-16 mx-auto text-gray-300 mb-4"}),(0,n.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No patients yet"}),(0,n.jsx)("p",{className:"text-gray-600 mb-6",children:"Add your first patient to get started."}),(0,n.jsx)(c.default,{href:"/patients/new",className:"btn-primary",children:"Add Your First Patient"})]}):(0,n.jsx)("div",{className:"divide-y",children:t.map(e=>(0,n.jsxs)("div",{className:"py-4 flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,n.jsxs)("div",{className:"text-sm text-gray-600",children:[e.email||"No email"," \xb7 ",e.phone||"No phone"]})]}),(0,n.jsx)(c.default,{href:"/patients/".concat(e.id),className:"btn-secondary",children:"View"})]},e.id))})})]})};function h(){return(0,n.jsx)(o,{})}},2513:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s(1066).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1240:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s(1066).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},3648:function(e,t,s){"use strict";var n=s(7437);s(2265),t.Z=e=>{let{size:t="md",className:s=""}=e;return(0,n.jsx)("div",{className:"flex items-center justify-center ".concat(s),children:(0,n.jsx)("div",{className:"loading-spinner ".concat({sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12",xl:"h-16 w-16"}[t])})})}},4674:function(e,t,s){"use strict";s.d(t,{$4:function(){return h},FV:function(){return u}});var n=s(7437),r=s(2265),i=s(46);let a="https://phoumeccawrtsjztxldi.supabase.co",c="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBob3VtZWNjYXdydHNqenR4bGRpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAzNDEyNTcsImV4cCI6MjA3NTkxNzI1N30.xMGO_scepJgrqhF318DZuXQwuVcZR47AMS81wFwcQA0";a&&a.startsWith("https://"),c&&c.split(".").length;let l=a&&c?(0,i.eI)(a,c):null,d={supabase:l},o=(0,r.createContext)(),h=()=>{let e=(0,r.useContext)(o);if(!e)throw Error("useSupabase must be used within a SupabaseProvider");return e},u=e=>{let{children:t}=e;if(!l){let e=[];a||e.push("NEXT_PUBLIC_SUPABASE_URL"),c||e.push("NEXT_PUBLIC_SUPABASE_ANON_KEY");let t=e=>"string"==typeof e?"".concat(e.slice(0,6),"...").concat(e.slice(-4)):"";return(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"max-w-lg w-full bg-red-50 border border-red-200 rounded-md p-6",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Configuration error"}),(0,n.jsx)("p",{className:"text-sm text-red-700 mb-3",children:"Missing required environment variables. Update client/.env.local and restart the dev server."}),(0,n.jsxs)("ul",{className:"text-sm text-red-700 list-disc pl-5 space-y-1",children:[!a&&(0,n.jsx)("li",{children:"REACT_APP_SUPABASE_URL is missing"}),!c&&(0,n.jsx)("li",{children:"REACT_APP_SUPABASE_ANON_KEY is missing"})]}),(0,n.jsxs)("div",{className:"mt-4 text-xs text-red-700",children:[(0,n.jsx)("div",{children:"Current values (masked):"}),(0,n.jsxs)("div",{children:["URL: ",a?t(a):"(not set)"]}),(0,n.jsxs)("div",{children:["Anon Key: ",c?t(c):"(not set)"]})]}),(0,n.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Reload App"})]})})}return(0,n.jsx)(o.Provider,{value:d,children:t})}}},function(e){e.O(0,[46,233,971,23,744],function(){return e(e.s=1787)}),_N_E=e.O()}]);