(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[769],{2079:function(e,t,s){Promise.resolve().then(s.bind(s,7627))},7627:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var r=s(7437),a=s(2265),n=s(6463),i=s(4674),l=s(3648);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,s(1066).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);function d(){let{id:e}=(0,n.useParams)(),{supabase:t}=(0,i.$4)(),s=(0,n.useRouter)(),[d,o]=(0,a.useState)(null),[u,m]=(0,a.useState)(!0),[h,x]=(0,a.useState)("");return((0,a.useEffect)(()=>{let s=async()=>{try{m(!0);let{data:{session:s}}=await t.auth.getSession();if(!(null==s?void 0:s.access_token)){x("You must be logged in to view patient details"),m(!1);return}let r=await fetch("".concat("http://localhost:5000","/api/patients/").concat(e),{headers:{Authorization:"Bearer ".concat(s.access_token)}});if(!r.ok){let e=await r.json().catch(()=>({}));throw Error(e.error||"Failed to load patient")}let a=await r.json();o(a)}catch(e){x(e.message)}finally{m(!1)}};e&&s()},[e,t]),u)?(0,r.jsx)("div",{className:"flex justify-center py-12",children:(0,r.jsx)(l.Z,{})}):h?(0,r.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-600 max-w-lg mx-auto mt-10",children:h}):d?(0,r.jsxs)("div",{className:"max-w-3xl mx-auto space-y-6",children:[(0,r.jsxs)("button",{onClick:()=>s.push("/patients"),className:"flex items-center text-sm text-gray-600 hover:text-gray-800",children:[(0,r.jsx)(c,{className:"w-4 h-4 mr-1"}),"Back to Patients"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:d.name}),(0,r.jsxs)("p",{className:"text-gray-600",children:["Patient ID: ",d.id]})]}),(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Email"}),(0,r.jsx)("p",{className:"text-gray-900",children:d.email||"N/A"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Phone"}),(0,r.jsx)("p",{className:"text-gray-900",children:d.phone||"N/A"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Date of Birth"}),(0,r.jsx)("p",{className:"text-gray-900",children:d.date_of_birth||"N/A"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Last Visit"}),(0,r.jsx)("p",{className:"text-gray-900",children:d.last_visit_date||"N/A"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Next Follow-Up"}),(0,r.jsx)("p",{className:"text-gray-900",children:d.next_follow_up_date||"N/A"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Notes"}),(0,r.jsx)("p",{className:"text-gray-900 whitespace-pre-line",children:d.notes||"No notes available"})]})]})]}):(0,r.jsx)("div",{className:"text-center py-12 text-gray-600",children:"Patient not found."})}},1066:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var r=s(1920),a=s(7029),n=s(3090),i=s(2265),l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),d=(e,t)=>{let s=(0,i.forwardRef)((s,d)=>{var{color:o="currentColor",size:u=24,strokeWidth:m=2,absoluteStrokeWidth:h,className:x="",children:p}=s,N=(0,n._)(s,["color","size","strokeWidth","absoluteStrokeWidth","className","children"]);return(0,i.createElement)("svg",(0,r._)((0,a._)((0,r._)({ref:d},l),{width:u,height:u,stroke:o,strokeWidth:h?24*Number(m)/Number(u):m,className:["lucide","lucide-".concat(c(e)),x].join(" ")}),N),[...t.map(e=>{let[t,s]=e;return(0,i.createElement)(t,s)}),...Array.isArray(p)?p:[p]])});return s.displayName="".concat(e),s}},6463:function(e,t,s){"use strict";var r=s(1169);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},3648:function(e,t,s){"use strict";var r=s(7437);s(2265),t.Z=e=>{let{size:t="md",className:s=""}=e;return(0,r.jsx)("div",{className:"flex items-center justify-center ".concat(s),children:(0,r.jsx)("div",{className:"loading-spinner ".concat({sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12",xl:"h-16 w-16"}[t])})})}},4674:function(e,t,s){"use strict";s.d(t,{$4:function(){return u},FV:function(){return m}});var r=s(7437),a=s(2265),n=s(46);let i="https://phoumeccawrtsjztxldi.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBob3VtZWNjYXdydHNqenR4bGRpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAzNDEyNTcsImV4cCI6MjA3NTkxNzI1N30.xMGO_scepJgrqhF318DZuXQwuVcZR47AMS81wFwcQA0";i&&i.startsWith("https://"),l&&l.split(".").length;let c=i&&l?(0,n.eI)(i,l):null,d={supabase:c},o=(0,a.createContext)(),u=()=>{let e=(0,a.useContext)(o);if(!e)throw Error("useSupabase must be used within a SupabaseProvider");return e},m=e=>{let{children:t}=e;if(!c){let e=[];i||e.push("NEXT_PUBLIC_SUPABASE_URL"),l||e.push("NEXT_PUBLIC_SUPABASE_ANON_KEY");let t=e=>"string"==typeof e?"".concat(e.slice(0,6),"...").concat(e.slice(-4)):"";return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"max-w-lg w-full bg-red-50 border border-red-200 rounded-md p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Configuration error"}),(0,r.jsx)("p",{className:"text-sm text-red-700 mb-3",children:"Missing required environment variables. Update client/.env.local and restart the dev server."}),(0,r.jsxs)("ul",{className:"text-sm text-red-700 list-disc pl-5 space-y-1",children:[!i&&(0,r.jsx)("li",{children:"REACT_APP_SUPABASE_URL is missing"}),!l&&(0,r.jsx)("li",{children:"REACT_APP_SUPABASE_ANON_KEY is missing"})]}),(0,r.jsxs)("div",{className:"mt-4 text-xs text-red-700",children:[(0,r.jsx)("div",{children:"Current values (masked):"}),(0,r.jsxs)("div",{children:["URL: ",i?t(i):"(not set)"]}),(0,r.jsxs)("div",{children:["Anon Key: ",l?t(l):"(not set)"]})]}),(0,r.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Reload App"})]})})}return(0,r.jsx)(o.Provider,{value:d,children:t})}}},function(e){e.O(0,[46,971,23,744],function(){return e(e.s=2079)}),_N_E=e.O()}]);