(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[648],{5020:function(e,s,t){Promise.resolve().then(t.bind(t,3308))},3308:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return N}});var r=t(7437),a=t(2265),n=t(4972),i=t(6463),l=t(7138),c=t(1066);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,c.Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);var u=t(1240),o=t(6600),h=t(8711),x=t(6935),m=t(4258),f=t(4697),y=t(2022);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let g=(0,c.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),p=(0,c.Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);var v=e=>{let{children:s}=e,[t,c]=(0,a.useState)(!1),v=(0,i.usePathname)(),{clinic:j,signOut:N}=(0,n.a)(),b=[{name:"Dashboard",href:"/dashboard",icon:d},{name:"Patients",href:"/patients",icon:u.Z},{name:"Reminders",href:"/reminders",icon:o.Z},{name:"AI Insights",href:"/insights",icon:h.Z},{name:"Subscription",href:"/subscription",icon:x.Z},{name:"Settings",href:"/settings",icon:m.Z}],k=e=>v===e,w=async()=>{await N()};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsxs)("div",{className:"fixed inset-0 z-50 lg:hidden ".concat(t?"block":"hidden"),children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>c(!1)}),(0,r.jsxs)("div",{className:"fixed inset-y-0 left-0 flex w-64 flex-col bg-white shadow-xl",children:[(0,r.jsxs)("div",{className:"flex h-16 items-center justify-between px-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"h-8 w-8 bg-gradient-to-r from-primary-600 to-primary-800 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white font-bold text-sm",children:"CS"})})}),(0,r.jsx)("div",{className:"ml-3",children:(0,r.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:"CareSync AI"})})]}),(0,r.jsx)("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-600",children:(0,r.jsx)(f.Z,{className:"h-6 w-6"})})]}),(0,r.jsx)("nav",{className:"flex-1 px-4 py-4 space-y-1",children:b.map(e=>{let s=e.icon;return(0,r.jsxs)(l.default,{href:e.href,className:"sidebar-link ".concat(k(e.href)?"sidebar-link-active":"sidebar-link-inactive"),onClick:()=>c(!1),children:[(0,r.jsx)(s,{className:"mr-3 h-5 w-5"}),e.name]},e.name)})}),(0,r.jsx)("div",{className:"border-t border-gray-200 p-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"h-8 w-8 bg-gray-300 rounded-full flex items-center justify-center",children:(0,r.jsx)(y.Z,{className:"h-5 w-5 text-gray-600"})})}),(0,r.jsxs)("div",{className:"ml-3 flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:null==j?void 0:j.name}),(0,r.jsx)("p",{className:"text-xs text-gray-500 capitalize",children:null==j?void 0:j.subscription_plan})]}),(0,r.jsx)("button",{onClick:w,className:"ml-2 text-gray-400 hover:text-gray-600",title:"Sign out",children:(0,r.jsx)(g,{className:"h-5 w-5"})})]})})]})]}),(0,r.jsx)("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:(0,r.jsxs)("div",{className:"flex flex-col flex-grow bg-white border-r border-gray-200",children:[(0,r.jsx)("div",{className:"flex h-16 items-center px-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"h-8 w-8 bg-gradient-to-r from-primary-600 to-primary-800 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white font-bold text-sm",children:"CS"})})}),(0,r.jsx)("div",{className:"ml-3",children:(0,r.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:"CareSync AI"})})]})}),(0,r.jsx)("nav",{className:"flex-1 px-4 py-4 space-y-1",children:b.map(e=>{let s=e.icon;return(0,r.jsxs)(l.default,{href:e.href,className:"sidebar-link ".concat(k(e.href)?"sidebar-link-active":"sidebar-link-inactive"),children:[(0,r.jsx)(s,{className:"mr-3 h-5 w-5"}),e.name]},e.name)})}),(0,r.jsx)("div",{className:"border-t border-gray-200 p-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"h-8 w-8 bg-gray-300 rounded-full flex items-center justify-center",children:(0,r.jsx)(y.Z,{className:"h-5 w-5 text-gray-600"})})}),(0,r.jsxs)("div",{className:"ml-3 flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:null==j?void 0:j.name}),(0,r.jsx)("p",{className:"text-xs text-gray-500 capitalize",children:null==j?void 0:j.subscription_plan})]}),(0,r.jsx)("button",{onClick:w,className:"ml-2 text-gray-400 hover:text-gray-600",title:"Sign out",children:(0,r.jsx)(g,{className:"h-5 w-5"})})]})})]})}),(0,r.jsxs)("div",{className:"lg:pl-64",children:[(0,r.jsxs)("div",{className:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8",children:[(0,r.jsx)("button",{type:"button",className:"-m-2.5 p-2.5 text-gray-700 lg:hidden",onClick:()=>c(!0),children:(0,r.jsx)(p,{className:"h-6 w-6"})}),(0,r.jsxs)("div",{className:"flex flex-1 gap-x-4 self-stretch lg:gap-x-6",children:[(0,r.jsx)("div",{className:"flex flex-1"}),(0,r.jsxs)("div",{className:"flex items-center gap-x-4 lg:gap-x-6",children:[(0,r.jsx)("div",{className:"hidden lg:block lg:h-6 lg:w-px lg:bg-gray-200"}),(0,r.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,r.jsx)("div",{className:"h-8 w-8 bg-gray-300 rounded-full flex items-center justify-center",children:(0,r.jsx)(y.Z,{className:"h-5 w-5 text-gray-600"})}),(0,r.jsxs)("div",{className:"hidden lg:block",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:null==j?void 0:j.name}),(0,r.jsx)("p",{className:"text-xs text-gray-500 capitalize",children:null==j?void 0:j.subscription_plan})]})]})]})]})]}),(0,r.jsx)("main",{className:"py-6",children:(0,r.jsx)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:s})})]})]})},j=t(3648);function N(e){let{children:s}=e,{user:t,loading:l}=(0,n.a)(),c=(0,i.useRouter)();return((0,a.useEffect)(()=>{l||t||c.replace("/login")},[l,t,c]),l)?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)(j.Z,{size:"lg"})}):t?(0,r.jsx)(v,{children:s}):null}},8711:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(1066).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},6600:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(1066).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},6935:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(1066).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},4258:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(1066).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},2022:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(1066).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1240:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(1066).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},4697:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(1066).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6463:function(e,s,t){"use strict";var r=t(1169);t.o(r,"useParams")&&t.d(s,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},3648:function(e,s,t){"use strict";var r=t(7437);t(2265),s.Z=e=>{let{size:s="md",className:t=""}=e;return(0,r.jsx)("div",{className:"flex items-center justify-center ".concat(t),children:(0,r.jsx)("div",{className:"loading-spinner ".concat({sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12",xl:"h-16 w-16"}[s])})})}},4972:function(e,s,t){"use strict";t.d(s,{H:function(){return u},a:function(){return d}});var r=t(1920),a=t(7437),n=t(2265),i=t(4674),l=t(8726);let c=(0,n.createContext)(),d=()=>{let e=(0,n.useContext)(c);if(!e)throw Error("useAuth must be used within an AuthProvider");return e},u=e=>{let{children:s}=e,{supabase:t}=(0,i.$4)(),[d,u]=(0,n.useState)(null),[o,h]=(0,n.useState)(null),[x,m]=(0,n.useState)(!0),f=(0,n.useRef)(!0),y=function(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t]},g=(0,n.useCallback)(async()=>{try{let{data:{session:e},error:s}=await t.auth.getSession();if(s){y("⚠️ getSession error:",s);return}if(!(null==e?void 0:e.access_token)){y("⚠️ No Supabase access token found for fetching clinic data.");return}let r=await fetch("".concat("http://localhost:5000","/api/auth/profile"),{headers:{Authorization:"Bearer ".concat(e.access_token)}});if(!f.current)return;if(r.ok){let e=await r.json();if(!f.current)return;h(e.clinic)}else{let e=await r.text();if(console.error("❌ Failed to fetch clinic data:",e),!f.current)return;h(null)}}catch(e){if(console.error("\uD83D\uDD25 Error fetching clinic data:",e),!f.current)return;h(null)}},[t]);(0,n.useEffect)(()=>{f.current=!0,m(!0),(async()=>{try{var e;let{data:{session:s},error:r}=await t.auth.getSession();if(r&&y("⚠️ getSession error:",r),!f.current)return;let a=null!==(e=null==s?void 0:s.user)&&void 0!==e?e:null;u(a),a?await g():h(null)}catch(e){console.error("\uD83D\uDD25 Error during session init:",e)}finally{}})();let e=setTimeout(()=>{f.current&&m(!1)},1500),{data:{subscription:s}}=t.auth.onAuthStateChange(async(s,t)=>{var r;if(y("\uD83D\uDD04 Auth state changed:",s),!f.current)return;let a=null!==(r=null==t?void 0:t.user)&&void 0!==r?r:null;switch(u(a),s){case"SIGNED_IN":case"INITIAL_SESSION":case"TOKEN_REFRESHED":case"USER_UPDATED":a&&await g();break;case"SIGNED_OUT":h(null)}m(!1),clearTimeout(e)});return()=>{var t;y("\uD83E\uDDF9 Cleaning up auth listener"),f.current=!1,clearTimeout(e),null==s||null===(t=s.unsubscribe)||void 0===t||t.call(s)}},[t,g]);let p=async(e,s,t)=>{try{let a=await fetch("".concat("http://localhost:5000","/api/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,r._)({email:e,password:s},t))}),n=await a.json();if(a.ok)return l.ZP.success("Registration successful! Please verify your email."),{success:!0,data:n};return l.ZP.error(n.error||"Registration failed"),{success:!1,error:n.error}}catch(e){return console.error("❌ Sign-up error:",e),l.ZP.error("Registration failed. Please try again."),{success:!1,error:e.message}}},v=async(e,s)=>{let{error:r}=await t.auth.signInWithPassword({email:e,password:s});return r?(l.ZP.error(r.message),{success:!1,error:r.message}):(l.ZP.success("Login successful!"),{success:!0})},j=async()=>{let{error:e}=await t.auth.signOut();return e?(l.ZP.error("Logout failed"),console.error("❌ Sign-out error:",e),{success:!1}):(l.ZP.success("Logged out successfully"),{success:!0})};return(0,a.jsx)(c.Provider,{value:{user:d,clinic:o,loading:x,signUp:p,signIn:v,signOut:j},children:s})}},4674:function(e,s,t){"use strict";t.d(s,{$4:function(){return o},FV:function(){return h}});var r=t(7437),a=t(2265),n=t(2835);let i="https://phoumeccawrtsjztxldi.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBob3VtZWNjYXdydHNqenR4bGRpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAzNDEyNTcsImV4cCI6MjA3NTkxNzI1N30.xMGO_scepJgrqhF318DZuXQwuVcZR47AMS81wFwcQA0";i&&i.startsWith("https://"),l&&l.split(".").length;let c=i&&l?(0,n.eI)(i,l):null,d={supabase:c},u=(0,a.createContext)(),o=()=>{let e=(0,a.useContext)(u);if(!e)throw Error("useSupabase must be used within a SupabaseProvider");return e},h=e=>{let{children:s}=e;if(!c){let e=[];i||e.push("NEXT_PUBLIC_SUPABASE_URL"),l||e.push("NEXT_PUBLIC_SUPABASE_ANON_KEY");let s=e=>"string"==typeof e?"".concat(e.slice(0,6),"...").concat(e.slice(-4)):"";return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"max-w-lg w-full bg-red-50 border border-red-200 rounded-md p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Configuration error"}),(0,r.jsx)("p",{className:"text-sm text-red-700 mb-3",children:"Missing required environment variables. Update client/.env.local and restart the dev server."}),(0,r.jsxs)("ul",{className:"text-sm text-red-700 list-disc pl-5 space-y-1",children:[!i&&(0,r.jsx)("li",{children:"REACT_APP_SUPABASE_URL is missing"}),!l&&(0,r.jsx)("li",{children:"REACT_APP_SUPABASE_ANON_KEY is missing"})]}),(0,r.jsxs)("div",{className:"mt-4 text-xs text-red-700",children:[(0,r.jsx)("div",{children:"Current values (masked):"}),(0,r.jsxs)("div",{children:["URL: ",i?s(i):"(not set)"]}),(0,r.jsxs)("div",{children:["Anon Key: ",l?s(l):"(not set)"]})]}),(0,r.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Reload App"})]})})}return(0,r.jsx)(u.Provider,{value:d,children:s})}}},function(e){e.O(0,[835,233,657,971,23,744],function(){return e(e.s=5020)}),_N_E=e.O()}]);