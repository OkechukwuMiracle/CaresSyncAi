"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[629],{7019:function(e,t,r){r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(1066).Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])},5733:function(e,t,r){r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(1066).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},4042:function(e,t,r){r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(1066).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},4453:function(e,t,r){r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(1066).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},4086:function(e,t,r){r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(1066).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},6463:function(e,t,r){var s=r(1169);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},3629:function(e,t,r){var s=r(1920),a=r(7029),n=r(7437),i=r(2265),l=r(7138),c=r(4042),o=r(4086),u=r(4453),d=r(7019),h=r(5733),m=r(4972),x=r(3648),f=r(6463);t.default=()=>{let[e,t]=(0,i.useState)({email:"",password:""}),[r,p]=(0,i.useState)(!1),[y,g]=(0,i.useState)(!1),[w,v]=(0,i.useState)(""),{signIn:j}=(0,m.a)(),N=(0,f.useRouter)(),b=(0,i.useRef)(!0);(0,i.useEffect)(()=>()=>{b.current=!1},[]);let S=r=>{t((0,a._)((0,s._)({},e),{[r.target.name]:r.target.value}))},A=async t=>{t.preventDefault(),g(!0),v("");try{let t=await j(e.email,e.password);t.success?N.push("/dashboard"):v(t.error||"Login failed. Please try again.")}catch(e){console.error("Login error:",e),v(e.message||"An unexpected error occurred.")}finally{b.current&&g(!1)}};return(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-primary-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"mx-auto h-16 w-16 bg-gradient-to-r from-primary-600 to-primary-800 rounded-2xl flex items-center justify-center",children:(0,n.jsx)(c.Z,{className:"h-8 w-8 text-white"})}),(0,n.jsx)("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Welcome to CareSync AI"}),(0,n.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to your healthcare management dashboard"})]}),(0,n.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[(0,n.jsxs)("form",{className:"space-y-6",onSubmit:A,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"email",className:"label",children:"Email Address"}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,n.jsx)(o.Z,{className:"h-5 w-5 text-gray-400"})}),(0,n.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"input-field pl-10",disabled:y,placeholder:"Enter your email",value:e.email,onChange:S})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"password",className:"label",children:"Password"}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,n.jsx)(u.Z,{className:"h-5 w-5 text-gray-400"})}),(0,n.jsx)("input",{id:"password",name:"password",type:r?"text":"password",autoComplete:"current-password",required:!0,className:"input-field pl-10 pr-10",disabled:y,placeholder:"Enter your password",value:e.password,onChange:S}),(0,n.jsx)("button",{type:"button","aria-label":r?"Hide password":"Show password","aria-pressed":r,title:r?"Hide password":"Show password",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>p(!r),disabled:y,children:r?(0,n.jsx)(d.Z,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):(0,n.jsx)(h.Z,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),w&&(0,n.jsx)("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded px-3 py-2 mb-2",children:w}),(0,n.jsx)("div",{children:(0,n.jsx)("button",{type:"submit",disabled:y,className:"w-full btn-primary flex items-center justify-center",children:y?(0,n.jsx)(x.Z,{size:"sm"}):"Sign In"})})]}),(0,n.jsxs)("div",{className:"mt-6",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,n.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,n.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,n.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"New to CareSync AI?"})})]}),(0,n.jsx)("div",{className:"mt-6",children:(0,n.jsx)(l.default,{href:"/register",className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200",children:"Create your account"})})]})]}),(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"AI-powered patient follow-up reminders and insights"})})]})})}},3648:function(e,t,r){var s=r(7437);r(2265),t.Z=e=>{let{size:t="md",className:r=""}=e;return(0,s.jsx)("div",{className:"flex items-center justify-center ".concat(r),children:(0,s.jsx)("div",{className:"loading-spinner ".concat({sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12",xl:"h-16 w-16"}[t])})})}},4972:function(e,t,r){r.d(t,{H:function(){return u},a:function(){return o}});var s=r(1920),a=r(7437),n=r(2265),i=r(4674),l=r(8726);let c=(0,n.createContext)(),o=()=>{let e=(0,n.useContext)(c);if(!e)throw Error("useAuth must be used within an AuthProvider");return e},u=e=>{let{children:t}=e,{supabase:r}=(0,i.$4)(),[o,u]=(0,n.useState)(null),[d,h]=(0,n.useState)(null),[m,x]=(0,n.useState)(!0),f=(0,n.useRef)(!0),p=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r]},y=(0,n.useCallback)(async()=>{try{let{data:{session:e},error:t}=await r.auth.getSession();if(t){p("⚠️ getSession error:",t);return}if(!(null==e?void 0:e.access_token)){p("⚠️ No Supabase access token found for fetching clinic data.");return}let s=await fetch("".concat("http://localhost:5000","/api/auth/profile"),{headers:{Authorization:"Bearer ".concat(e.access_token)}});if(!f.current)return;if(s.ok){let e=await s.json();if(!f.current)return;h(e.clinic)}else{let e=await s.text();if(console.error("❌ Failed to fetch clinic data:",e),!f.current)return;h(null)}}catch(e){if(console.error("\uD83D\uDD25 Error fetching clinic data:",e),!f.current)return;h(null)}},[r]);(0,n.useEffect)(()=>{f.current=!0,x(!0),(async()=>{try{var e;let{data:{session:t},error:s}=await r.auth.getSession();if(s&&p("⚠️ getSession error:",s),!f.current)return;let a=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:null;u(a),a?await y():h(null)}catch(e){console.error("\uD83D\uDD25 Error during session init:",e)}finally{}})();let e=setTimeout(()=>{f.current&&x(!1)},1500),{data:{subscription:t}}=r.auth.onAuthStateChange(async(t,r)=>{var s;if(p("\uD83D\uDD04 Auth state changed:",t),!f.current)return;let a=null!==(s=null==r?void 0:r.user)&&void 0!==s?s:null;switch(u(a),t){case"SIGNED_IN":case"INITIAL_SESSION":case"TOKEN_REFRESHED":case"USER_UPDATED":a&&await y();break;case"SIGNED_OUT":h(null)}x(!1),clearTimeout(e)});return()=>{var r;p("\uD83E\uDDF9 Cleaning up auth listener"),f.current=!1,clearTimeout(e),null==t||null===(r=t.unsubscribe)||void 0===r||r.call(t)}},[r,y]);let g=async(e,t,r)=>{try{let a=await fetch("".concat("http://localhost:5000","/api/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,s._)({email:e,password:t},r))}),n=await a.json();if(a.ok)return l.ZP.success("Registration successful! Please verify your email."),{success:!0,data:n};return l.ZP.error(n.error||"Registration failed"),{success:!1,error:n.error}}catch(e){return console.error("❌ Sign-up error:",e),l.ZP.error("Registration failed. Please try again."),{success:!1,error:e.message}}},w=async(e,t)=>{let{error:s}=await r.auth.signInWithPassword({email:e,password:t});return s?(l.ZP.error(s.message),{success:!1,error:s.message}):(l.ZP.success("Login successful!"),{success:!0})},v=async()=>{let{error:e}=await r.auth.signOut();return e?(l.ZP.error("Logout failed"),console.error("❌ Sign-out error:",e),{success:!1}):(l.ZP.success("Logged out successfully"),{success:!0})};return(0,a.jsx)(c.Provider,{value:{user:o,clinic:d,loading:m,signUp:g,signIn:w,signOut:v},children:t})}},4674:function(e,t,r){r.d(t,{$4:function(){return d},FV:function(){return h}});var s=r(7437),a=r(2265),n=r(46);let i="https://phoumeccawrtsjztxldi.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBob3VtZWNjYXdydHNqenR4bGRpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAzNDEyNTcsImV4cCI6MjA3NTkxNzI1N30.xMGO_scepJgrqhF318DZuXQwuVcZR47AMS81wFwcQA0";i&&i.startsWith("https://"),l&&l.split(".").length;let c=i&&l?(0,n.eI)(i,l):null,o={supabase:c},u=(0,a.createContext)(),d=()=>{let e=(0,a.useContext)(u);if(!e)throw Error("useSupabase must be used within a SupabaseProvider");return e},h=e=>{let{children:t}=e;if(!c){let e=[];i||e.push("NEXT_PUBLIC_SUPABASE_URL"),l||e.push("NEXT_PUBLIC_SUPABASE_ANON_KEY");let t=e=>"string"==typeof e?"".concat(e.slice(0,6),"...").concat(e.slice(-4)):"";return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"max-w-lg w-full bg-red-50 border border-red-200 rounded-md p-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Configuration error"}),(0,s.jsx)("p",{className:"text-sm text-red-700 mb-3",children:"Missing required environment variables. Update client/.env.local and restart the dev server."}),(0,s.jsxs)("ul",{className:"text-sm text-red-700 list-disc pl-5 space-y-1",children:[!i&&(0,s.jsx)("li",{children:"REACT_APP_SUPABASE_URL is missing"}),!l&&(0,s.jsx)("li",{children:"REACT_APP_SUPABASE_ANON_KEY is missing"})]}),(0,s.jsxs)("div",{className:"mt-4 text-xs text-red-700",children:[(0,s.jsx)("div",{children:"Current values (masked):"}),(0,s.jsxs)("div",{children:["URL: ",i?t(i):"(not set)"]}),(0,s.jsxs)("div",{children:["Anon Key: ",l?t(l):"(not set)"]})]}),(0,s.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Reload App"})]})})}return(0,s.jsx)(u.Provider,{value:o,children:t})}}}]);